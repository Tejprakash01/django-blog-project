{% extends "blog/base.html" %}
{% block content %}

<h2>Chat with {{ other_user.username }}</h2>

<div>
  {% for msg in messages %}
    <p><b>{{ msg.sender.username }}:</b> {{ msg.text }}</p>
  {% endfor %}
</div>

<script>
  chatSocket.onmessage = function(e) {
    const data = JSON.parse(e.data);

    const msg = document.createElement("div");
    msg.innerHTML = `
        <strong>${data.sender}</strong>: ${data.message}
        <small style="color:gray">(${data.timestamp})</small>
    `;
    document.querySelector("#chat-log").appendChild(msg);
};

</script>

{% endblock %}
